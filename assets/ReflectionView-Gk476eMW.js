import{p as F,r as n,u as G,o as I,b as a,j as e,q as L,x as b,g as R,G as H,F as C,y as J,l as x,A as T,B as V,z as K,D,E as M,e as o}from"./index-qxoF8_RV.js";import{T as P}from"./TutorialOverlay-ChGMBBam.js";const Q={class:"space-y-6 pb-20"},W={class:"space-y-4"},X={key:0,class:"bg-slate-900/50 border-2 border-dashed border-blue-800/30 rounded-lg p-8 text-center"},Y={class:"flex justify-between items-start mb-2"},Z={class:"text-xs text-slate-500"},ee={class:"relative"},te=["onClick"],le={key:0,class:"absolute right-0 top-8 bg-slate-800 border border-slate-700 rounded-lg shadow-xl z-10 min-w-[140px] overflow-hidden"},se=["onClick"],oe=["onClick"],ae=["onClick"],ne={class:"text-slate-200 line-clamp-3"},re={key:1,class:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4 backdrop-blur-sm"},ie={class:"bg-slate-800 p-6 rounded-lg max-w-md w-full border border-blue-800 shadow-2xl relative"},de={class:"text-xl font-bold text-blue-700 mb-2"},ue={class:"text-xs text-slate-500 mb-4"},ce={key:0,class:"space-y-4"},ve={class:"flex gap-3"},be=["disabled"],xe={key:1,class:"bg-slate-900 p-4 rounded border border-slate-700 max-h-96 overflow-y-auto"},fe={class:"text-slate-200 whitespace-pre-wrap"},pe={key:2,class:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4"},me={class:"bg-slate-800 p-6 rounded-lg max-w-md w-full border border-blue-800 shadow-2xl relative"},he=["disabled"],ge={key:3,class:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4 backdrop-blur-sm"},ye={__name:"ReflectionView",setup(we){const u=F("rpg-reflections",[]),r=n(""),c=n(""),h=n(!1),f=G(),g=n(!1);I(()=>{!f.onboarding.visitedViews.reflection&&!f.onboarding.skippedTutorials&&f.onboarding.completed&&setTimeout(()=>{g.value=!0},300)});const z=()=>{f.markViewVisited("reflection"),g.value=!1},E=()=>{f.skipAllTutorials(),g.value=!1},v=n(null),w=n(!1),i=n(null),p=n(!1),d=n(""),_=n(!1),m=n(null),q=()=>{if(console.log("saveReflection called"),console.log("currentNote:",r.value),!r.value||!r.value.trim()){console.error("No note content");return}u.value.unshift({id:Date.now(),date:new Date().toLocaleDateString("pt-BR"),text:r.value}),console.log("Reflection saved to storage"),r.value="",c.value="Reflex√£o salva! ‚ú®",setTimeout(()=>{c.value="",h.value=!1},1500)},N=()=>{h.value=!1,r.value="",c.value=""},S=l=>{v.value=v.value===l?null:l},j=l=>{v.value=null,p.value=!1,i.value=l,d.value=l.text,w.value=!0},A=l=>{v.value=null,p.value=!0,i.value=l,d.value=l.text,w.value=!0},B=()=>{if(i.value&&d.value.trim()){const l=u.value.findIndex(t=>t.id===i.value.id);l!==-1&&(u.value[l].text=d.value.trim()),k()}},U=l=>{v.value=null,m.value=l.id,_.value=!0},$=()=>{m.value&&(u.value=u.value.filter(l=>l.id!==m.value)),_.value=!1,m.value=null},O=()=>{_.value=!1,m.value=null},k=()=>{w.value=!1,i.value=null,p.value=!1,d.value=""};return(l,t)=>(o(),a("div",null,[e("div",Q,[e("div",W,[R(u).length===0?(o(),a("div",X,[...t[3]||(t[3]=[H('<div class="text-5xl mb-4">üìù</div><h3 class="text-lg font-semibold text-blue-900 mb-2">Nenhuma reflex√£o ainda</h3><p class="text-slate-400 text-sm mb-3"> Use este espa√ßo para registrar aprendizados, insights e oportunidades de melhoria. </p><p class="text-blue-600 text-sm font-medium"> üí° Clique no bot√£o <span class="inline-block bg-blue-900 text-white px-2 py-1 rounded text-xs">‚ûï</span> abaixo para come√ßar! </p>',4)])])):b("",!0),(o(!0),a(C,null,J(R(u),s=>(o(),a("div",{key:s.id,class:"bg-slate-900 p-4 rounded border border-slate-800 hover:border-blue-800 transition-colors relative"},[e("div",Y,[e("p",Z,x(s.date),1),e("div",ee,[e("button",{onClick:D(y=>S(s.id),["stop"]),class:"text-slate-400 hover:text-white transition-colors p-1"}," ‚ãÆ ",8,te),v.value===s.id?(o(),a("div",le,[e("button",{onClick:y=>j(s),class:"w-full px-4 py-2 text-left text-sm hover:bg-slate-700 transition-colors flex items-center gap-2"}," üëÅÔ∏è Ver ",8,se),e("button",{onClick:y=>A(s),class:"w-full px-4 py-2 text-left text-sm hover:bg-slate-700 transition-colors flex items-center gap-2"}," ‚úèÔ∏è Editar ",8,oe),e("button",{onClick:y=>U(s),class:"w-full px-4 py-2 text-left text-sm text-red-400 hover:bg-red-900/20 transition-colors flex items-center gap-2"}," üóëÔ∏è Excluir ",8,ae)])):b("",!0)])]),e("p",ne,x(s.text),1)]))),128))])]),e("button",{onClick:t[0]||(t[0]=s=>h.value=!0),class:"fixed bottom-24 right-4 bg-blue-900 hover:bg-blue-800 text-white w-14 h-14 rounded-full shadow-lg transition hover:scale-110 flex items-center justify-center text-2xl",title:"Adicionar Reflex√£o"}," ‚ûï "),g.value?(o(),L(P,{key:0,title:"üìù Reflex√µes",icon:"üìù",content:["Bem-vindo √† se√ß√£o de Reflex√µes! Este √© seu espa√ßo pessoal para documentar pensamentos, aprendizados e insights.","Use como um di√°rio de progresso, anotando conquistas, desafios superados e li√ß√µes aprendidas no dia a dia."],tips:["Anote suas conquistas do dia, por menores que sejam","Use reflex√µes para identificar padr√µes de comportamento","Revise reflex√µes antigas para ver seu progresso","A escrita regular melhora autoconhecimento","Clique nos 3 pontinhos para editar ou deletar reflex√µes"],onClose:z,onSkipAll:E})):b("",!0),w.value&&i.value?(o(),a("div",re,[e("div",ie,[e("button",{onClick:k,class:"absolute top-2 right-2 text-slate-400 hover:text-white text-xl"},"‚úï"),e("h2",de,x(p.value?"‚úèÔ∏è Editar Reflex√£o":"üìù Reflex√£o"),1),e("p",ue,x(i.value.date),1),p.value?(o(),a("div",ce,[T(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=s=>d.value=s),class:"w-full h-64 bg-slate-900 border border-slate-700 rounded p-4 text-white focus:border-blue-800 outline-none resize-none",placeholder:"Escreva sua reflex√£o..."},null,512),[[V,d.value]]),e("div",ve,[e("button",{onClick:k,class:"flex-1 bg-slate-700 hover:bg-slate-600 text-white font-bold py-3 rounded transition-colors"}," Cancelar "),e("button",{onClick:B,disabled:!d.value.trim(),class:"flex-1 bg-blue-900 hover:bg-blue-800 disabled:bg-slate-600 text-white font-bold py-3 rounded transition-colors"}," Salvar ",8,be)])])):(o(),a("div",xe,[e("p",fe,x(i.value.text),1)]))])])):b("",!0),h.value?(o(),a("div",pe,[e("div",me,[e("button",{onClick:N,class:"absolute top-2 right-2 text-slate-400 hover:text-white text-xl"},"‚úï"),t[4]||(t[4]=e("h2",{class:"text-xl font-bold text-blue-700 mb-4"},"üìù Nova Reflex√£o",-1)),t[5]||(t[5]=e("p",{class:"text-slate-400 text-sm mb-4"},"O que voc√™ aprendeu? Onde pode melhorar?",-1)),T(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>r.value=s),class:"w-full h-32 bg-slate-900 border border-slate-700 rounded p-3 text-white focus:border-blue-800 outline-none mb-4",placeholder:"Escreva aqui..."},null,512),[[V,r.value]]),e("button",{onClick:D(q,["prevent","stop"]),disabled:!r.value.trim()||!!c.value,class:K([c.value?"bg-green-600":"bg-blue-900 hover:bg-blue-800","w-full disabled:bg-slate-600 disabled:cursor-not-allowed text-white font-bold py-3 rounded transition-colors"])},[c.value?(o(),a(C,{key:0},[M(" ‚úì "+x(c.value),1)],64)):(o(),a(C,{key:1},[M(" Salvar Reflex√£o ")],64))],10,he)])])):b("",!0),_.value?(o(),a("div",ge,[e("div",{class:"bg-slate-800 p-6 rounded-2xl max-w-sm w-full border border-red-500/50 shadow-2xl animate-fade-in"},[t[6]||(t[6]=e("h2",{class:"text-xl font-bold text-red-400 mb-2"},"üóëÔ∏è Deletar Reflex√£o?",-1)),t[7]||(t[7]=e("p",{class:"text-slate-300 text-sm mb-6"},"Tem certeza que deseja deletar esta reflex√£o? Esta a√ß√£o n√£o pode ser desfeita.",-1)),e("div",{class:"flex gap-3"},[e("button",{onClick:O,class:"flex-1 bg-slate-700 hover:bg-slate-600 text-white font-bold py-3 rounded transition-colors"}," Cancelar "),e("button",{onClick:$,class:"flex-1 bg-red-600 hover:bg-red-500 text-white font-bold py-3 rounded transition-colors"}," Deletar ")])])])):b("",!0)]))}};export{ye as default};
