import{r as i,b as a,e as o,j as e,x as p,A as D,B as O,C as z,l as f,D as q,F as $,E as B,u as K,o as X,c as I,f as Y,q as J,y as R,z as C}from"./index-C3hA8F6Q.js";import{u as V}from"./missions-Dl1L21tv.js";import{T as H}from"./TutorialOverlay-DpJ0w1xq.js";const Q={key:0,class:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4"},W={class:"bg-slate-800 p-6 rounded-lg max-w-md w-full border border-orange-500 shadow-2xl relative"},Z=["disabled"],ee=["disabled"],se={key:0,class:"animate-spin"},te={key:0,class:"text-red-400 text-sm mb-4 text-center"},oe={key:1,class:"bg-slate-900/80 p-4 rounded-lg border border-orange-500/50 space-y-4"},ae={key:0,class:"text-center"},le={key:1,class:"text-center"},ne={class:"bg-orange-900/30 p-4 rounded border border-orange-500/30 mt-3"},re={class:"text-orange-200 font-bold text-xl"},ie={class:"text-slate-400 italic text-sm text-center border-t border-slate-700 pt-3"},de=["disabled"],ue=`Atua como um mentor de RPG e especialista em produtividade baseado na "T√©cnica dos 2 Minutos".

REGRAS:
1. Se a tarefa √© simples e r√°pida (menos de 10 minutos), marque como "Ideal".
2. Se a tarefa √© vaga, complexa ou demora mais de 30 minutos, marque como "Grande".

IMPORTANTE:
- Se for "Ideal": N√ÉO mude a tarefa! Apenas melhore a escrita do usu√°rio de forma clara e concisa. Mantenha a ess√™ncia original.
- Se for "Grande": Crie uma vers√£o m√≠nima de at√© 10 minutos para come√ßar o movimento.

Responda APENAS em JSON v√°lido:
{
  "status": "Ideal" ou "Grande",
  "sugestao_2_minutos": "Se Ideal: a tarefa original melhorada. Se Grande: o t√≠tulo da tarefa da a√ß√£o m√≠nima",
  "frase_motivacional": "Frase curta estilo narrador de jogo usando o contexto da miss√£o."
}`,ce={__name:"TwoMinuteRule",setup(F){const _=V(),g=i(!1),u=i(""),c=i(null),y=i(!1),w=i(""),j="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",A=async()=>{if(u.value.trim()){y.value=!0,w.value="",c.value=null;try{const n=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${j}`,"Content-Type":"application/json","HTTP-Referer":window.location.origin,"X-Title":"RPG Life"},body:JSON.stringify({model:"nvidia/nemotron-3-nano-30b-a3b:free",messages:[{role:"system",content:ue},{role:"user",content:`Miss√£o do jogador: "${u.value}"`}],temperature:.7,max_tokens:1e4})});if(!n.ok)throw new Error(`API Error: ${n.status}`);const r=(await n.json()).choices?.[0]?.message?.content;if(r)try{const x=r.match(/\{[\s\S]*\}/);if(x){const h=JSON.parse(x[0]);c.value={status:h.status||"Grande",sugestao_2_minutos:h.sugestao_2_minutos||"Fa√ßa por 2 minutos.",frase_motivacional:h.frase_motivacional||"O primeiro passo √© o mais importante!"}}}catch{const x=r.match(/"sugestao_2_minutos"\s*:\s*"([^"]+)"/),h=r.match(/"frase_motivacional"\s*:\s*"([^"]+)"/),S=r.match(/"status"\s*:\s*"([^"]+)"/);c.value={status:S?.[1]||"Grande",sugestao_2_minutos:x?.[1]||"Fa√ßa por apenas 2 minutos.",frase_motivacional:h?.[1]||"Cada jornada come√ßa com um passo!"}}}catch(n){console.error("OpenRouter Error:",n),w.value="Erro ao conectar com a IA. Usando modo offline.",c.value={status:"Grande",sugestao_2_minutos:"Fa√ßa essa tarefa por apenas 2 minutos cronometrados.",frase_motivacional:"Mesmo sem conex√£o, o her√≥i n√£o para!"}}finally{y.value=!1}}},m=i(""),M=()=>{console.log("addAsMission called"),console.log("suggestion.value:",c.value),console.log("taskInput.value:",u.value);const n=c.value?.sugestao_2_minutos||u.value;if(console.log("missionText to add:",n),!n||!n.trim()){console.error("No mission text to add");return}_.addMission("bonus",n,10),console.log("Mission added to store"),m.value="Miss√£o adicionada como B√¥nus! ‚ú®",setTimeout(()=>{m.value="",k()},1500)},k=()=>{g.value=!1,c.value=null,u.value="",w.value="",m.value=""};return(n,l)=>(o(),a("div",null,[e("button",{onClick:l[0]||(l[0]=r=>g.value=!0),class:"fixed bottom-24 right-4 bg-orange-600 hover:bg-orange-500 text-white p-3 rounded-full shadow-lg z-40 transition hover:scale-110",title:"Regra dos 2 Minutos (Anti-Procrastina√ß√£o)"}," ‚ö° "),g.value?(o(),a("div",Q,[e("div",W,[e("button",{onClick:k,class:"absolute top-2 right-2 text-slate-400 hover:text-white"},"‚úï"),l[4]||(l[4]=e("h2",{class:"text-xl font-bold text-orange-400 mb-4"},"‚ö° Regra dos 2 Minutos",-1)),l[5]||(l[5]=e("p",{class:"text-sm text-slate-300 mb-4"},"Est√° procrastinando? Digite a tarefa dif√≠cil e a IA vai simplific√°-la.",-1)),D(e("input",{"onUpdate:modelValue":l[1]||(l[1]=r=>u.value=r),type:"text",placeholder:"Ex: Estudar 2 horas para a prova",class:"w-full bg-slate-900 border border-slate-700 rounded p-3 text-white mb-4 focus:border-orange-500 outline-none",onKeyup:z(A,["enter"]),disabled:y.value},null,40,Z),[[O,u.value]]),e("button",{onClick:A,disabled:y.value||!u.value.trim(),class:"w-full bg-orange-600 hover:bg-orange-500 disabled:bg-slate-600 disabled:cursor-not-allowed text-white font-bold py-3 rounded mb-4 flex items-center justify-center gap-2"},[y.value?(o(),a("span",se,"‚è≥")):p("",!0),e("span",null,f(y.value?"Analisando...":"ü§ñ Analisar com IA"),1)],8,ee),w.value?(o(),a("p",te,f(w.value),1)):p("",!0),c.value?(o(),a("div",oe,[c.value.status==="Ideal"?(o(),a("div",ae,[...l[2]||(l[2]=[e("p",{class:"text-green-300 font-bold text-lg mt-2"},"üü¢ Miss√£o Ideal!",-1),e("p",{class:"text-slate-400 text-sm"},"Esta tarefa j√° est√° no tamanho certo. Podes come√ßar agora!",-1)])])):(o(),a("div",le,[l[3]||(l[3]=e("p",{class:"text-red-300 font-bold text-lg mt-2"},"üî¥ Miss√£o Grande",-1)),e("div",ne,[e("p",re,"üéØ "+f(c.value.sugestao_2_minutos),1)])])),e("p",ie,' "'+f(c.value.frase_motivacional)+'" ',1),e("button",{onClick:q(M,["prevent","stop"]),disabled:!!m.value,class:"w-full bg-blue-600 hover:bg-blue-500 disabled:bg-green-600 disabled:cursor-not-allowed text-white font-bold py-3 px-4 rounded transition-colors mt-4"},[m.value?(o(),a($,{key:0},[B(" ‚úì "+f(m.value),1)],64)):(o(),a($,{key:1},[B(" ‚ûï Add como Miss√£o B√¥nus ")],64))],8,de)])):p("",!0)])])):p("",!0)]))}},me={class:"space-y-6 pb-20"},be={class:"bg-slate-800 rounded-xl p-4 border border-blue-900 shadow-lg"},ve={class:"flex justify-between items-center mb-4"},pe={key:0,class:"text-slate-500 text-sm italic"},fe={class:"space-y-2"},ge=["onClick","onMousedown","onTouchstart"],xe={class:"flex items-center gap-2"},he={key:0,class:"text-green-400 font-bold"},_e={key:1,class:"text-yellow-500 font-mono text-sm"},ye={class:"bg-slate-800 rounded-xl p-4 border border-blue-900 shadow-lg"},we={class:"flex justify-between items-center mb-4"},Me={key:0,class:"text-slate-500 text-sm italic"},ke={class:"space-y-2"},Te=["onClick","onMousedown","onTouchstart"],Ce={class:"flex items-center gap-2"},Ae={key:0,class:"text-green-400 font-bold"},Se={key:1,class:"text-yellow-500 font-mono text-sm"},$e={class:"bg-slate-800 rounded-xl p-4 border border-blue-900 shadow-lg"},je={class:"flex justify-between items-center mb-4"},Pe={key:0,class:"text-slate-500 text-sm italic"},Ee={class:"space-y-2"},Ne=["onClick","onMousedown","onTouchstart"],Ie={class:"flex items-center gap-2"},Re={key:0,class:"text-green-400 font-bold"},Be={key:1,class:"text-yellow-500 font-mono text-sm"},Ge={key:1,class:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4"},De={class:"bg-slate-800 p-6 rounded-lg max-w-sm w-full border border-blue-500 shadow-2xl relative"},Oe={class:"text-xl font-bold text-blue-400 mb-4"},ze={class:"text-sm text-slate-400 mb-4"},Ve={class:"text-yellow-400 font-bold"},Fe=["disabled"],Le={key:2,class:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4 backdrop-blur-sm"},Xe={__name:"MissionsView",setup(F){const _=V(),g=K(),u=i(!1);X(()=>{!g.onboarding.visitedViews.missions&&!g.onboarding.skippedTutorials&&g.onboarding.completed&&setTimeout(()=>{u.value=!0},300)});const c=()=>{g.markViewVisited("missions"),u.value=!1},y=()=>{g.skipAllTutorials(),u.value=!1},w=I(()=>_.dailies.main),j=I(()=>_.dailies.secondary),A=I(()=>_.dailies.bonus),m=i(!1),M=i(""),k=i("main"),n=i(null),l=i(!1),r=i(null),x=i(!1),h=i({x:0,y:0}),S={main:{name:"Principal",reward:25,color:"yellow"},secondary:{name:"Secund√°ria",reward:15,color:"blue"},bonus:{name:"B√≥nus",reward:10,color:"green"}},P=b=>{k.value=b,m.value=!0},G=()=>{M.value.trim()&&(_.addMission(k.value,M.value,S[k.value].reward),M.value="",m.value=!1)},T=(b,t,s)=>{x.value=!1,s.touches&&s.touches[0]&&(h.value={x:s.touches[0].clientX,y:s.touches[0].clientY}),n.value=setTimeout(()=>{x.value=!0,r.value={category:b,id:t},l.value=!0},600)},E=b=>{if(b.touches&&b.touches[0]&&n.value){const t=Math.abs(b.touches[0].clientX-h.value.x),s=Math.abs(b.touches[0].clientY-h.value.y);(t>10||s>10)&&v()}},v=()=>{n.value&&(clearTimeout(n.value),n.value=null)},N=(b,t)=>{x.value||_.toggleMission(b,t),x.value=!1},L=()=>{r.value&&_.deleteMission(r.value.category,r.value.id),l.value=!1,r.value=null},U=()=>{l.value=!1,r.value=null};return(b,t)=>(o(),a("div",me,[e("section",be,[e("div",ve,[t[5]||(t[5]=e("h2",{class:"text-xl font-bold text-yellow-400"},"üî• Miss√µes Principais",-1)),e("button",{onClick:t[0]||(t[0]=s=>P("main")),class:"bg-blue-600 hover:bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold"},"+")]),w.value.length===0?(o(),a("div",pe,"Nenhuma miss√£o principal ativa.")):p("",!0),e("div",fe,[(o(!0),a($,null,R(w.value,s=>(o(),a("div",{key:s.id,class:C(["flex items-center justify-between gap-2 p-3 bg-slate-900 rounded-lg border border-slate-700 hover:border-blue-500 transition-colors cursor-pointer select-none",{"opacity-50 grayscale":s.completed}]),onClick:d=>N("main",s.id),onMousedown:d=>T("main",s.id,d),onMouseup:v,onMouseleave:v,onTouchstart:d=>T("main",s.id,d),onTouchmove:E,onTouchend:v},[e("span",{class:C({"line-through text-slate-500":s.completed})},f(s.text),3),e("div",xe,[s.completed?(o(),a("span",he,"‚úì")):(o(),a("span",_e,"25 ü™ô"))])],42,ge))),128))])]),e("section",ye,[e("div",we,[t[6]||(t[6]=e("h2",{class:"text-xl font-bold text-blue-300"},"üõ°Ô∏è Miss√µes Secund√°rias",-1)),e("button",{onClick:t[1]||(t[1]=s=>P("secondary")),class:"bg-blue-600 hover:bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold"},"+")]),j.value.length===0?(o(),a("div",Me,"Nenhuma miss√£o secund√°ria.")):p("",!0),e("div",ke,[(o(!0),a($,null,R(j.value,s=>(o(),a("div",{key:s.id,class:C(["flex items-center justify-between gap-2 p-3 bg-slate-900 rounded-lg border border-slate-700 hover:border-blue-500 transition-colors cursor-pointer select-none",{"opacity-50 grayscale":s.completed}]),onClick:d=>N("secondary",s.id),onMousedown:d=>T("secondary",s.id,d),onMouseup:v,onMouseleave:v,onTouchstart:d=>T("secondary",s.id,d),onTouchmove:E,onTouchend:v},[e("span",{class:C({"line-through text-slate-500":s.completed})},f(s.text),3),e("div",Ce,[s.completed?(o(),a("span",Ae,"‚úì")):(o(),a("span",Se,"15 ü™ô"))])],42,Te))),128))])]),e("section",$e,[e("div",je,[t[7]||(t[7]=e("h2",{class:"text-xl font-bold text-green-400"},"üå± B√¥nus",-1)),e("button",{onClick:t[2]||(t[2]=s=>P("bonus")),class:"bg-blue-600 hover:bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold"},"+")]),A.value.length===0?(o(),a("div",Pe,"Nenhum b√≥nus dispon√≠vel.")):p("",!0),e("div",Ee,[(o(!0),a($,null,R(A.value,s=>(o(),a("div",{key:s.id,class:C(["flex items-center justify-between gap-2 p-3 bg-slate-900 rounded-lg border border-slate-700 hover:border-blue-500 transition-colors cursor-pointer select-none",{"opacity-50 grayscale":s.completed}]),onClick:d=>N("bonus",s.id),onMousedown:d=>T("bonus",s.id,d),onMouseup:v,onMouseleave:v,onTouchstart:d=>T("bonus",s.id,d),onTouchmove:E,onTouchend:v},[e("span",{class:C({"line-through text-slate-500":s.completed})},f(s.text),3),e("div",Ie,[s.completed?(o(),a("span",Re,"‚úì")):(o(),a("span",Be,"10 ü™ô"))])],42,Ne))),128))])]),Y(ce),u.value?(o(),J(H,{key:0,title:"‚öîÔ∏è Miss√µes",icon:"‚öîÔ∏è",content:["Bem-vindo √† se√ß√£o de Miss√µes! Aqui voc√™ gerencia suas tarefas di√°rias organizadas em tr√™s categorias.","Miss√µes Principais t√™m maior recompensa, Secund√°rias s√£o tarefas de apoio, e B√¥nus s√£o extras opcionais."],tips:["Miss√µes principais d√£o mais moedas!","Complete todas as miss√µes di√°rias para maximizar recompensas","Use a Regra dos 2 Minutos em miss√µes dif√≠ceis de come√ßar","Use o botao com o ‚ö° para IA simplificar miss√µes dif√≠ceis","Miss√µes resetam diariamente √† meia-noite","Pressione e segure uma miss√£o para delet√°-la"],onClose:c,onSkipAll:y})):p("",!0),m.value?(o(),a("div",Ge,[e("div",De,[e("button",{onClick:t[3]||(t[3]=s=>m.value=!1),class:"absolute top-2 right-2 text-slate-400 hover:text-white"},"‚úï"),e("h2",Oe," Nova Miss√£o "+f(S[k.value].name),1),D(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>M.value=s),type:"text",placeholder:"Descreva a miss√£o...",class:"w-full bg-slate-900 border border-slate-700 rounded p-3 text-white mb-4 focus:border-blue-500 outline-none",onKeyup:z(G,["enter"]),autofocus:""},null,544),[[O,M.value]]),e("div",ze,[t[8]||(t[8]=B(" Recompensa: ",-1)),e("span",Ve,f(S[k.value].reward)+" ü™ô",1)]),e("button",{onClick:G,disabled:!M.value.trim(),class:"w-full bg-blue-600 hover:bg-blue-500 disabled:bg-slate-600 text-white font-bold py-3 rounded"}," Adicionar Miss√£o ",8,Fe)])])):p("",!0),l.value?(o(),a("div",Le,[e("div",{class:"bg-slate-800 p-6 rounded-2xl max-w-sm w-full border border-red-500/50 shadow-2xl animate-fade-in"},[t[9]||(t[9]=e("h2",{class:"text-xl font-bold text-red-400 mb-2"},"üóëÔ∏è Deletar Miss√£o?",-1)),t[10]||(t[10]=e("p",{class:"text-slate-300 text-sm mb-6"},"Tem certeza que deseja deletar esta miss√£o? Esta a√ß√£o n√£o pode ser desfeita.",-1)),e("div",{class:"flex gap-3"},[e("button",{onClick:U,class:"flex-1 bg-slate-700 hover:bg-slate-600 text-white font-bold py-3 rounded transition-colors"}," Cancelar "),e("button",{onClick:L,class:"flex-1 bg-red-600 hover:bg-red-500 text-white font-bold py-3 rounded transition-colors"}," Deletar ")])])])):p("",!0)]))}};export{Xe as default};
