import{m as E,p as Y,u as A,r as i,o as K,c as S,b as u,j as e,q as U,x as T,F as X,y as B,z as C,l as f,A as D,B as V,C as G,e as r}from"./index-qxoF8_RV.js";import{T as I}from"./TutorialOverlay-ChGMBBam.js";const O=E("habits",{state:()=>({habits:Y("rpg-habits",[{id:1,text:"Beber √Ågua (2L)",type:"positive",xp:10,penalty:0},{id:2,text:"Ler 10 min",type:"positive",xp:15,penalty:0},{id:3,text:"Comer Fast Food",type:"negative",xp:0,penalty:20}])}),actions:{triggerHabit(c){const l=A(),a=this.habits.find(b=>b.id===c);a&&(a.type==="positive"?l.addXp(a.xp):a.type==="negative"&&l.removeXp(a.penalty))},addHabit(c,l,a){this.habits.push({id:Date.now(),text:c,type:l,xp:l==="positive"?a:0,penalty:l==="negative"?a*2:0})},removeHabit(c){this.habits=this.habits.filter(l=>l.id!==c)}}}),Q={class:"space-y-6 pb-20"},J={class:"bg-slate-800 rounded-xl p-4 border border-blue-900 shadow-lg"},R={class:"flex justify-between items-center mb-4"},W={class:"grid grid-cols-1 gap-3"},Z=["onClick","onMousedown","onTouchstart"],ee={class:"text-green-400 font-bold"},te={class:"bg-slate-800 rounded-xl p-4 border border-red-900 shadow-lg"},oe={class:"flex justify-between items-center mb-4"},se={class:"grid grid-cols-1 gap-3"},le=["onClick","onMousedown","onTouchstart"],ae={class:"text-red-500 font-bold"},ie={key:1,class:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4"},ne={class:"space-y-4"},re=["disabled"],de={key:2,class:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4 backdrop-blur-sm"},be={__name:"HabitsView",setup(c){const l=O(),a=A(),b=i(!1);K(()=>{!a.onboarding.visitedViews.habits&&!a.onboarding.skippedTutorials&&a.onboarding.completed&&setTimeout(()=>{b.value=!0},300)});const q=()=>{a.markViewVisited("habits"),b.value=!1},N=()=>{a.skipAllTutorials(),b.value=!1},z=S(()=>l.habits.filter(s=>s.type==="positive")),L=S(()=>l.habits.filter(s=>s.type==="negative")),g=i(null),x=i(!1),m=i(null),h=i(!1),H=i({x:0,y:0}),w=i(!1),v=i("positive"),p=i(""),y=i(10),M=s=>{v.value=s,p.value="",y.value=10,w.value=!0},_=()=>{p.value.trim()&&(l.addHabit(p.value,v.value,parseInt(y.value)),w.value=!1)},k=(s,t)=>{h.value=!1,t.touches&&t.touches[0]&&(H.value={x:t.touches[0].clientX,y:t.touches[0].clientY}),g.value=setTimeout(()=>{h.value=!0,m.value=s,x.value=!0},600)},P=s=>{if(s.touches&&s.touches[0]&&g.value){const t=Math.abs(s.touches[0].clientX-H.value.x),o=Math.abs(s.touches[0].clientY-H.value.y);(t>10||o>10)&&d()}},d=()=>{g.value&&(clearTimeout(g.value),g.value=null)},j=s=>{h.value||l.triggerHabit(s),h.value=!1},$=()=>{m.value&&l.removeHabit(m.value),x.value=!1,m.value=null},F=()=>{x.value=!1,m.value=null};return(s,t)=>(r(),u("div",Q,[e("section",J,[e("div",R,[t[5]||(t[5]=e("h2",{class:"text-xl font-bold text-green-400"},"‚ú® H√°bitos Positivos",-1)),e("button",{onClick:t[0]||(t[0]=o=>M("positive")),class:"bg-green-600 hover:bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold"},"+")]),e("div",W,[(r(!0),u(X,null,B(z.value,o=>(r(),u("button",{key:o.id,class:"flex items-center justify-between p-4 bg-slate-900 rounded-lg border border-slate-700 hover:bg-slate-800 hover:border-green-500 transition-all active:scale-95 cursor-pointer select-none",onClick:n=>j(o.id),onMousedown:n=>k(o.id,n),onMouseup:d,onMouseleave:d,onTouchstart:n=>k(o.id,n),onTouchmove:P,onTouchend:d},[e("span",null,f(o.text),1),e("span",ee,"+"+f(o.xp)+" XP",1)],40,Z))),128))])]),e("section",te,[e("div",oe,[t[6]||(t[6]=e("h2",{class:"text-xl font-bold text-red-400"},"üíÄ H√°bitos Negativos",-1)),e("button",{onClick:t[1]||(t[1]=o=>M("negative")),class:"bg-red-600 hover:bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold"},"+")]),e("div",se,[(r(!0),u(X,null,B(L.value,o=>(r(),u("button",{key:o.id,class:"flex items-center justify-between p-4 bg-slate-950 rounded-lg border border-red-900/50 hover:bg-slate-900 hover:border-red-500 transition-all active:scale-95 cursor-pointer select-none",onClick:n=>j(o.id),onMousedown:n=>k(o.id,n),onMouseup:d,onMouseleave:d,onTouchstart:n=>k(o.id,n),onTouchmove:P,onTouchend:d},[e("span",null,f(o.text),1),e("span",ae,"-"+f(o.penalty)+" XP",1)],40,le))),128))]),t[7]||(t[7]=e("p",{class:"text-xs text-red-300 mt-2 text-center opacity-70"}," ‚ö†Ô∏è Penalidade √© o dobro do ganho! Cuidado. ",-1))]),b.value?(r(),U(I,{key:0,title:"‚ù§Ô∏è H√°bitos",icon:"‚ù§Ô∏è",content:["Bem-vindo √† se√ß√£o de H√°bitos! Aqui voc√™ rastreia comportamentos di√°rios que formam a base do seu crescimento.","H√°bitos positivos concedem XP quando completados. H√°bitos negativos causam penalidade (o dobro do valor) se voc√™ ceder a eles."],tips:["Marque h√°bitos todos os dias para criar sequ√™ncias (streaks)","Quanto maior a consist√™ncia, maior o progresso!","Comece com 2-3 h√°bitos e adicione mais gradualmente","H√°bitos negativos t√™m penalidade dobrada - use com cuidado","Pressione e segure um h√°bito para delet√°-lo"],onClose:q,onSkipAll:N})):T("",!0),w.value?(r(),u("div",ie,[e("div",{class:C(["bg-slate-800 p-6 rounded-lg max-w-sm w-full border shadow-2xl relative",v.value==="positive"?"border-green-500":"border-red-500"])},[e("button",{onClick:t[2]||(t[2]=o=>w.value=!1),class:"absolute top-2 right-2 text-slate-400 hover:text-white"},"‚úï"),e("h2",{class:C(["text-xl font-bold mb-4",v.value==="positive"?"text-green-400":"text-red-400"])},f(v.value==="positive"?"‚ú® Novo H√°bito Positivo":"üíÄ Novo H√°bito Negativo"),3),e("div",ne,[e("div",null,[t[8]||(t[8]=e("label",{class:"block text-xs font-bold text-slate-400 mb-1 uppercase tracking-wider"},"Nome do H√°bito",-1)),D(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>p.value=o),type:"text",placeholder:"Ex: Beber √°gua",class:"w-full bg-slate-900 border border-slate-700 rounded p-3 text-white focus:border-indigo-500 outline-none",onKeyup:G(_,["enter"]),autofocus:""},null,544),[[V,p.value]])]),e("div",null,[t[9]||(t[9]=e("label",{class:"block text-xs font-bold text-slate-400 mb-1 uppercase tracking-wider"},"Valor de XP",-1)),D(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>y.value=o),type:"number",min:"1",class:"w-full bg-slate-900 border border-slate-700 rounded p-3 text-white focus:border-indigo-500 outline-none"},null,512),[[V,y.value,void 0,{number:!0}]])]),e("button",{onClick:_,disabled:!p.value.trim(),class:C(["w-full font-bold py-3 rounded disabled:bg-slate-600 transition-colors",v.value==="positive"?"bg-green-600 hover:bg-green-500":"bg-red-600 hover:bg-red-500"])}," Adicionar H√°bito ",10,re)])],2)])):T("",!0),x.value?(r(),u("div",de,[e("div",{class:"bg-slate-800 p-6 rounded-2xl max-w-sm w-full border border-red-500/50 shadow-2xl animate-fade-in"},[t[10]||(t[10]=e("h2",{class:"text-xl font-bold text-red-400 mb-2"},"üóëÔ∏è Deletar H√°bito?",-1)),t[11]||(t[11]=e("p",{class:"text-slate-300 text-sm mb-6"},"Tem certeza que deseja deletar este h√°bito? Esta a√ß√£o n√£o pode ser desfeita.",-1)),e("div",{class:"flex gap-3"},[e("button",{onClick:F,class:"flex-1 bg-slate-700 hover:bg-slate-600 text-white font-bold py-3 rounded transition-colors"}," Cancelar "),e("button",{onClick:$,class:"flex-1 bg-red-600 hover:bg-red-500 text-white font-bold py-3 rounded transition-colors"}," Deletar ")])])])):T("",!0)]))}};export{be as default};
