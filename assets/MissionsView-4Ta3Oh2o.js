import{r as d,b as a,e as o,j as e,x as g,A as z,B as V,C as U,l as h,D as X,F as j,E as G,u as Y,o as H,c as O,f as W,q as Z,y as R,z as P}from"./index-D030uP0N.js";import{u as q}from"./missions-Hb5ncRzF.js";import{T as J}from"./TutorialOverlay-B_7zbR7x.js";const Q=5,D="RPG_",F="_LIFE",ee=$=>{try{let l=$;l.startsWith(D)&&(l=l.slice(D.length)),l.endsWith(F)&&(l=l.slice(0,-F.length));const v=l.split("").reverse().join("");return atob(v).split("").map(i=>String.fromCharCode(i.charCodeAt(0)-Q)).join("")}catch{return console.error("üõ°Ô∏è Security: Falha ao decodificar chave. Verifique o .env"),""}},se={key:0,class:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4"},te={class:"bg-slate-800 p-6 rounded-lg max-w-md w-full border border-orange-500 shadow-2xl relative"},oe=["disabled"],ae=["disabled"],ne={key:0,class:"animate-spin"},le={key:0,class:"text-red-400 text-sm mb-4 text-center"},re={key:1,class:"bg-slate-900/80 p-4 rounded-lg border border-orange-500/50 space-y-4"},ie={key:0,class:"text-center"},de={key:1,class:"text-center"},ce={class:"bg-orange-900/30 p-4 rounded border border-orange-500/30 mt-3"},ue={class:"text-orange-200 font-bold text-xl"},me={class:"text-slate-400 italic text-sm text-center border-t border-slate-700 pt-3"},be=["disabled"],ve=`Atua como um mentor de RPG e especialista em produtividade baseado na "T√©cnica dos 2 Minutos".

REGRAS:
1. Se a tarefa √© simples e r√°pida (menos de 10 minutos), marque como "Ideal".
2. Se a tarefa √© vaga, complexa ou demora mais de 30 minutos, marque como "Grande".

IMPORTANTE:
- Se for "Ideal": N√ÉO mude a tarefa! Apenas melhore a escrita do usu√°rio de forma clara e concisa. Mantenha a ess√™ncia original.
- Se for "Grande": Crie uma vers√£o m√≠nima de at√© 10 minutos para come√ßar o movimento.

Responda APENAS em JSON v√°lido:
{
  "status": "Ideal" ou "Grande",
  "sugestao_2_minutos": "Se Ideal: a tarefa original melhorada. Se Grande: o t√≠tulo da tarefa da a√ß√£o m√≠nima",
  "frase_motivacional": "Frase curta estilo narrador de jogo usando o contexto da miss√£o."
}`,pe={__name:"TwoMinuteRule",setup($){const l=q(),v=d(!1),c=d(""),i=d(null),_=d(!1),y=d(""),A=ee("RPG_==AO+sTO4wzar5Dar1DamZTP+cmPmZGO2cWN+0TP3UTNqZGPmt2Z4UjNp5TOrh2O6wjP2YTNotTO7gmOrdGP6g2NyYzeycHdyAHe_LIFE");A?A.startsWith("sk-or-v1-")||console.error("‚ö° API Key decodificada parece inv√°lida. Verifique se voc√™ seguiu o passo de ofusca√ß√£o corretamente."):console.warn("‚ö° API Key n√£o encontrada ou falha na decodifica√ß√£o.");const k=async()=>{if(c.value.trim()){_.value=!0,y.value="",i.value=null;try{const r=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:`Bearer ${A}`,"Content-Type":"application/json","HTTP-Referer":window.location.origin,"X-Title":"RPG Life"},body:JSON.stringify({model:"nvidia/nemotron-3-nano-30b-a3b:free",messages:[{role:"system",content:ve},{role:"user",content:`Miss√£o do jogador: "${c.value}"`}],temperature:.7,max_tokens:1e4})});if(!r.ok)throw new Error(`API Error: ${r.status}`);const b=(await r.json()).choices?.[0]?.message?.content;if(b)try{const M=b.match(/\{[\s\S]*\}/);if(M){const x=JSON.parse(M[0]);i.value={status:x.status||"Grande",sugestao_2_minutos:x.sugestao_2_minutos||"Fa√ßa por 2 minutos.",frase_motivacional:x.frase_motivacional||"O primeiro passo √© o mais importante!"}}}catch{const M=b.match(/"sugestao_2_minutos"\s*:\s*"([^"]+)"/),x=b.match(/"frase_motivacional"\s*:\s*"([^"]+)"/),S=b.match(/"status"\s*:\s*"([^"]+)"/);i.value={status:S?.[1]||"Grande",sugestao_2_minutos:M?.[1]||"Fa√ßa por apenas 2 minutos.",frase_motivacional:x?.[1]||"Cada jornada come√ßa com um passo!"}}}catch(r){console.error("OpenRouter Error:",r),y.value="Erro ao conectar com a IA. Usando modo offline.",i.value={status:"Grande",sugestao_2_minutos:"Fa√ßa essa tarefa por apenas 2 minutos cronometrados.",frase_motivacional:"Mesmo sem conex√£o, o her√≥i n√£o para!"}}finally{_.value=!1}}},m=d(""),T=()=>{console.log("addAsMission called"),console.log("suggestion.value:",i.value),console.log("taskInput.value:",c.value);const r=i.value?.sugestao_2_minutos||c.value;if(console.log("missionText to add:",r),!r||!r.trim()){console.error("No mission text to add");return}l.addMission("bonus",r,10),console.log("Mission added to store"),m.value="Miss√£o adicionada como B√¥nus! ‚ú®",setTimeout(()=>{m.value="",w()},1500)},w=()=>{v.value=!1,i.value=null,c.value="",y.value="",m.value=""};return(r,n)=>(o(),a("div",null,[e("button",{onClick:n[0]||(n[0]=b=>v.value=!0),class:"fixed bottom-24 right-4 bg-orange-600 hover:bg-orange-500 text-white p-3 rounded-full shadow-lg z-40 transition hover:scale-110",title:"Regra dos 2 Minutos (Anti-Procrastina√ß√£o)"}," ‚ö° "),v.value?(o(),a("div",se,[e("div",te,[e("button",{onClick:w,class:"absolute top-2 right-2 text-slate-400 hover:text-white"},"‚úï"),n[4]||(n[4]=e("h2",{class:"text-xl font-bold text-orange-400 mb-4"},"‚ö° Regra dos 2 Minutos",-1)),n[5]||(n[5]=e("p",{class:"text-sm text-slate-300 mb-4"},"Est√° procrastinando? Digite a tarefa dif√≠cil e a IA vai simplific√°-la.",-1)),z(e("input",{"onUpdate:modelValue":n[1]||(n[1]=b=>c.value=b),type:"text",placeholder:"Ex: Estudar 2 horas para a prova",class:"w-full bg-slate-900 border border-slate-700 rounded p-3 text-white mb-4 focus:border-orange-500 outline-none",onKeyup:U(k,["enter"]),disabled:_.value},null,40,oe),[[V,c.value]]),e("button",{onClick:k,disabled:_.value||!c.value.trim(),class:"w-full bg-orange-600 hover:bg-orange-500 disabled:bg-slate-600 disabled:cursor-not-allowed text-white font-bold py-3 rounded mb-4 flex items-center justify-center gap-2"},[_.value?(o(),a("span",ne,"‚è≥")):g("",!0),e("span",null,h(_.value?"Analisando...":"ü§ñ Analisar com IA"),1)],8,ae),y.value?(o(),a("p",le,h(y.value),1)):g("",!0),i.value?(o(),a("div",re,[i.value.status==="Ideal"?(o(),a("div",ie,[...n[2]||(n[2]=[e("p",{class:"text-green-300 font-bold text-lg mt-2"},"üü¢ Miss√£o Ideal!",-1),e("p",{class:"text-slate-400 text-sm"},"Esta tarefa j√° est√° no tamanho certo. Podes come√ßar agora!",-1)])])):(o(),a("div",de,[n[3]||(n[3]=e("p",{class:"text-red-300 font-bold text-lg mt-2"},"üî¥ Miss√£o Grande",-1)),e("div",ce,[e("p",ue,"üéØ "+h(i.value.sugestao_2_minutos),1)])])),e("p",me,' "'+h(i.value.frase_motivacional)+'" ',1),e("button",{onClick:X(T,["prevent","stop"]),disabled:!!m.value,class:"w-full bg-blue-600 hover:bg-blue-500 disabled:bg-green-600 disabled:cursor-not-allowed text-white font-bold py-3 px-4 rounded transition-colors mt-4"},[m.value?(o(),a(j,{key:0},[G(" ‚úì "+h(m.value),1)],64)):(o(),a(j,{key:1},[G(" ‚ûï Add como Miss√£o B√¥nus ")],64))],8,be)])):g("",!0)])])):g("",!0)]))}},fe={class:"space-y-6 pb-20"},ge={class:"bg-slate-800 rounded-xl p-4 border border-blue-900 shadow-lg"},he={class:"flex justify-between items-center mb-4"},xe={key:0,class:"text-slate-500 text-sm italic"},_e={class:"space-y-2"},ye=["onClick","onMousedown","onTouchstart"],we={class:"flex items-center gap-2"},Me={key:0,class:"text-green-400 font-bold"},ke={key:1,class:"text-yellow-500 font-mono text-sm"},Te={class:"bg-slate-800 rounded-xl p-4 border border-blue-900 shadow-lg"},Ae={class:"flex justify-between items-center mb-4"},Ce={key:0,class:"text-slate-500 text-sm italic"},Pe={class:"space-y-2"},Se=["onClick","onMousedown","onTouchstart"],je={class:"flex items-center gap-2"},$e={key:0,class:"text-green-400 font-bold"},Ie={key:1,class:"text-yellow-500 font-mono text-sm"},Ne={class:"bg-slate-800 rounded-xl p-4 border border-blue-900 shadow-lg"},Ee={class:"flex justify-between items-center mb-4"},Oe={key:0,class:"text-slate-500 text-sm italic"},Re={class:"space-y-2"},Ge=["onClick","onMousedown","onTouchstart"],Be={class:"flex items-center gap-2"},De={key:0,class:"text-green-400 font-bold"},Fe={key:1,class:"text-yellow-500 font-mono text-sm"},ze={key:1,class:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4"},Ve={class:"bg-slate-800 p-6 rounded-lg max-w-sm w-full border border-blue-500 shadow-2xl relative"},Ue={class:"text-xl font-bold text-blue-400 mb-4"},qe={class:"text-sm text-slate-400 mb-4"},Ke={class:"text-yellow-400 font-bold"},Le=["disabled"],Xe={key:2,class:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4 backdrop-blur-sm"},Ze={__name:"MissionsView",setup($){const l=q(),v=Y(),c=d(!1);H(()=>{!v.onboarding.visitedViews.missions&&!v.onboarding.skippedTutorials&&v.onboarding.completed&&setTimeout(()=>{c.value=!0},300)});const i=()=>{v.markViewVisited("missions"),c.value=!1},_=()=>{v.skipAllTutorials(),c.value=!1},y=O(()=>l.dailies.main),I=O(()=>l.dailies.secondary),A=O(()=>l.dailies.bonus),k=d(!1),m=d(""),T=d("main"),w=d(null),r=d(!1),n=d(null),b=d(!1),M=d({x:0,y:0}),x={main:{name:"Principal",reward:25,color:"yellow"},secondary:{name:"Secund√°ria",reward:15,color:"blue"},bonus:{name:"B√≥nus",reward:10,color:"green"}},S=p=>{T.value=p,k.value=!0},B=()=>{m.value.trim()&&(l.addMission(T.value,m.value,x[T.value].reward),m.value="",k.value=!1)},C=(p,t,s)=>{b.value=!1,s.touches&&s.touches[0]&&(M.value={x:s.touches[0].clientX,y:s.touches[0].clientY}),w.value=setTimeout(()=>{b.value=!0,n.value={category:p,id:t},r.value=!0},600)},N=p=>{if(p.touches&&p.touches[0]&&w.value){const t=Math.abs(p.touches[0].clientX-M.value.x),s=Math.abs(p.touches[0].clientY-M.value.y);(t>10||s>10)&&f()}},f=()=>{w.value&&(clearTimeout(w.value),w.value=null)},E=(p,t)=>{b.value||l.toggleMission(p,t),b.value=!1},K=()=>{n.value&&l.deleteMission(n.value.category,n.value.id),r.value=!1,n.value=null},L=()=>{r.value=!1,n.value=null};return(p,t)=>(o(),a("div",fe,[e("section",ge,[e("div",he,[t[5]||(t[5]=e("h2",{class:"text-xl font-bold text-yellow-400"},"üî• Miss√µes Principais",-1)),e("button",{onClick:t[0]||(t[0]=s=>S("main")),class:"bg-blue-600 hover:bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold"},"+")]),y.value.length===0?(o(),a("div",xe,"Nenhuma miss√£o principal ativa.")):g("",!0),e("div",_e,[(o(!0),a(j,null,R(y.value,s=>(o(),a("div",{key:s.id,class:P(["flex items-center justify-between gap-2 p-3 bg-slate-900 rounded-lg border border-slate-700 hover:border-blue-500 transition-colors cursor-pointer select-none",{"opacity-50 grayscale":s.completed}]),onClick:u=>E("main",s.id),onMousedown:u=>C("main",s.id,u),onMouseup:f,onMouseleave:f,onTouchstart:u=>C("main",s.id,u),onTouchmove:N,onTouchend:f},[e("span",{class:P({"line-through text-slate-500":s.completed})},h(s.text),3),e("div",we,[s.completed?(o(),a("span",Me,"‚úì")):(o(),a("span",ke,"25 ü™ô"))])],42,ye))),128))])]),e("section",Te,[e("div",Ae,[t[6]||(t[6]=e("h2",{class:"text-xl font-bold text-blue-300"},"üõ°Ô∏è Miss√µes Secund√°rias",-1)),e("button",{onClick:t[1]||(t[1]=s=>S("secondary")),class:"bg-blue-600 hover:bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold"},"+")]),I.value.length===0?(o(),a("div",Ce,"Nenhuma miss√£o secund√°ria.")):g("",!0),e("div",Pe,[(o(!0),a(j,null,R(I.value,s=>(o(),a("div",{key:s.id,class:P(["flex items-center justify-between gap-2 p-3 bg-slate-900 rounded-lg border border-slate-700 hover:border-blue-500 transition-colors cursor-pointer select-none",{"opacity-50 grayscale":s.completed}]),onClick:u=>E("secondary",s.id),onMousedown:u=>C("secondary",s.id,u),onMouseup:f,onMouseleave:f,onTouchstart:u=>C("secondary",s.id,u),onTouchmove:N,onTouchend:f},[e("span",{class:P({"line-through text-slate-500":s.completed})},h(s.text),3),e("div",je,[s.completed?(o(),a("span",$e,"‚úì")):(o(),a("span",Ie,"15 ü™ô"))])],42,Se))),128))])]),e("section",Ne,[e("div",Ee,[t[7]||(t[7]=e("h2",{class:"text-xl font-bold text-green-400"},"üå± B√¥nus",-1)),e("button",{onClick:t[2]||(t[2]=s=>S("bonus")),class:"bg-blue-600 hover:bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold"},"+")]),A.value.length===0?(o(),a("div",Oe,"Nenhum b√≥nus dispon√≠vel.")):g("",!0),e("div",Re,[(o(!0),a(j,null,R(A.value,s=>(o(),a("div",{key:s.id,class:P(["flex items-center justify-between gap-2 p-3 bg-slate-900 rounded-lg border border-slate-700 hover:border-blue-500 transition-colors cursor-pointer select-none",{"opacity-50 grayscale":s.completed}]),onClick:u=>E("bonus",s.id),onMousedown:u=>C("bonus",s.id,u),onMouseup:f,onMouseleave:f,onTouchstart:u=>C("bonus",s.id,u),onTouchmove:N,onTouchend:f},[e("span",{class:P({"line-through text-slate-500":s.completed})},h(s.text),3),e("div",Be,[s.completed?(o(),a("span",De,"‚úì")):(o(),a("span",Fe,"10 ü™ô"))])],42,Ge))),128))])]),W(pe),c.value?(o(),Z(J,{key:0,title:"‚öîÔ∏è Miss√µes",icon:"‚öîÔ∏è",content:["Bem-vindo √† se√ß√£o de Miss√µes! Aqui voc√™ gerencia suas tarefas di√°rias organizadas em tr√™s categorias.","Miss√µes Principais t√™m maior recompensa, Secund√°rias s√£o tarefas de apoio, e B√¥nus s√£o extras opcionais."],tips:["Miss√µes principais d√£o mais moedas!","Complete todas as miss√µes di√°rias para maximizar recompensas","Use a Regra dos 2 Minutos em miss√µes dif√≠ceis de come√ßar","Use o botao com o ‚ö° para IA simplificar miss√µes dif√≠ceis","Miss√µes resetam diariamente √† meia-noite","Pressione e segure uma miss√£o para delet√°-la"],onClose:i,onSkipAll:_})):g("",!0),k.value?(o(),a("div",ze,[e("div",Ve,[e("button",{onClick:t[3]||(t[3]=s=>k.value=!1),class:"absolute top-2 right-2 text-slate-400 hover:text-white"},"‚úï"),e("h2",Ue," Nova Miss√£o "+h(x[T.value].name),1),z(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>m.value=s),type:"text",placeholder:"Descreva a miss√£o...",class:"w-full bg-slate-900 border border-slate-700 rounded p-3 text-white mb-4 focus:border-blue-500 outline-none",onKeyup:U(B,["enter"]),autofocus:""},null,544),[[V,m.value]]),e("div",qe,[t[8]||(t[8]=G(" Recompensa: ",-1)),e("span",Ke,h(x[T.value].reward)+" ü™ô",1)]),e("button",{onClick:B,disabled:!m.value.trim(),class:"w-full bg-blue-600 hover:bg-blue-500 disabled:bg-slate-600 text-white font-bold py-3 rounded"}," Adicionar Miss√£o ",8,Le)])])):g("",!0),r.value?(o(),a("div",Xe,[e("div",{class:"bg-slate-800 p-6 rounded-2xl max-w-sm w-full border border-red-500/50 shadow-2xl animate-fade-in"},[t[9]||(t[9]=e("h2",{class:"text-xl font-bold text-red-400 mb-2"},"üóëÔ∏è Deletar Miss√£o?",-1)),t[10]||(t[10]=e("p",{class:"text-slate-300 text-sm mb-6"},"Tem certeza que deseja deletar esta miss√£o? Esta a√ß√£o n√£o pode ser desfeita.",-1)),e("div",{class:"flex gap-3"},[e("button",{onClick:L,class:"flex-1 bg-slate-700 hover:bg-slate-600 text-white font-bold py-3 rounded transition-colors"}," Cancelar "),e("button",{onClick:K,class:"flex-1 bg-red-600 hover:bg-red-500 text-white font-bold py-3 rounded transition-colors"}," Deletar ")])])])):g("",!0)]))}};export{Ze as default};
